(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(75)},42:function(e,t,n){},43:function(e,t,n){},67:function(e,t){},70:function(e,t,n){e.exports=n.p+"static/media/video.b220a35d.mp4"},75:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(30),c=n.n(o),r=(n(42),n(34)),u=n(31),l=n(32),s=n(35),m=n(33),y=n(7),d=n(36),p=(n(43),n(1)),h=n.n(p),T=h()("https://shielded-sea-84002.herokuapp.com");n(70),n(71);var f=n(72),v=h()("https://shielded-sea-84002.herokuapp.com"),g=0,P=function(e){function t(e){var n,a;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).initSocket=function(){var e=h()(e);e.on("connect",function(){console.log("connected"),setInterval(function(){e.emit("timer",(new Date).getTime(),n.state.uuid)},2e3)})},n.getClientLatency=function(){var e=n.state.uuid,t=n.state.latencyObj;if(t!=={}){var a=Object.values(t),i=Math.max.apply(Math,Object(r.a)(a));g=i-t[e]}},n.playVid=function(){var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime},console.log("Dynamic Latency Adjustment: ",g),setTimeout(function(){n.setState({playState:"Play",playTime:e.currentTime},function(){v.emit("subscribeToTimer","Play",n.state.playTime)})},n.state.latencyDelay*g)},n.pauseVid=function(){var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime},n.setState({playState:"Pause",playTime:e.currentTime},function(){n.getClientLatency(),v.emit("subscribeToTimer","Pause",n.state.playTime)})},n.playAsync=function(){var e=document.getElementById("myVideo");n.setState({playState:"Play"}),e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime,e.play()}},n.pauseAsync=function(){var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime,e.pause()},n.setState({playState:"Pause",curPlayTime:e.currentTime})},n.updatePlayhead=function(){var e=Object(y.a)(n),t=document.getElementById("myVideo");"Pause"===n.state.playState&&"sync"===n.state.playMode&&n.state.curPlayTime!==t.currentTime&&(console.log("update",t.currentTime),e.setState({playTime:t.currentTime},function(){console.log("madeit",n.state.playTime),v.emit("subscribeToTimer","Pause",e.state.playTime)}))},n.state={playTime:10,playMode:"sync",latencyObj:{},curPlayTime:0,latencyDelay:0,videosrc:"https://media.w3.org/2010/05/sintel/trailer_hd.mp4"},a=function(e){return n.setState({timer:e})},T.on("setTimer",function(e){return a(e)}),function(e){T.on("playController",function(t){return e(t)})}(function(e){return n.setState({playState:e.curPlayState,curPlayTime:e.curPlayTime,latencyObj:e.latencyObj})}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({uuid:f()}),this.initSocket(),setInterval(function(){e.getClientLatency()},2e3)}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("myVideo");if("Play"===this.state.playState){var t=e.play();void 0!==t&&t.then(function(t){e.play()}).catch(function(t){e.pause()})}else e.pause();e.currentTime=this.state.curPlayTime}},{key:"render",value:function(){return i.a.createElement("div",{className:"videoSycnWrapper"},i.a.createElement("h1",null,"Synchronized Video Viewing"),i.a.createElement("div",{className:"videoWrapper"},i.a.createElement("video",{id:"myVideo",height:"300px",onTimeUpdate:this.updatePlayhead,src:this.state.videosrc,seeking:"true",controls:!0,preload:"auto"})),"Play State: ",this.state.playState,i.a.createElement("button",{onClick:this.playVid},"Sync Play"),i.a.createElement("button",{id:"SyncPause",onClick:this.pauseVid},"Sync Pause"),i.a.createElement("button",{onClick:this.playAsync},"Async Play"),i.a.createElement("button",{onClick:this.pauseAsync},"Async Pause"),i.a.createElement("p",null,"Client Video Timecode: ",i.a.createElement("span",{id:"demo"})),"From sever PlayState: ",this.state.playState,"From sever curPlayTime: ",this.state.curPlayTime,"Timer: ",this.state.time,"UUID: ",this.state.uuid,"Aggregated Latency: ",this.state.latencyDelay)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.1982b9a2.chunk.js.map