(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(77)},43:function(e,t,a){},44:function(e,t,a){},68:function(e,t){},71:function(e,t,a){e.exports=a.p+"static/media/video.b220a35d.mp4"},77:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(31),o=a.n(i),s=(a(43),a(35)),l=a(32),r=a(33),m=a(36),u=a(34),d=a(3),p=a(37),y=(a(44),a(1)),h=a.n(y),g=h()("https://syncprototype.herokuapp.com/");a(71),a(72);var b=a(16),v=a.n(b),f=a(74),T=1,k=h()("https://syncprototype.herokuapp.com/"),S=0,E=function(e){function t(e){var a,n;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).initSocket=function(){var e=h()(e);e.on("connect",function(){console.log("connected"),setInterval(function(){e.emit("timer",(new Date).getTime(),a.state.uuid)},2e3)})},a.updatePass=function(e){e.target.value===a.state.pass&&a.setState({enterViewing:!0})},a.updateVidSRC=function(e){a.setState({videosrc:e}),k.emit("changeVid",e)},a.enterViewing=function(){a.state.curPass===a.state.pass&&a.setState({enterViewing:!0})},a.getClientLatency=function(){var e={},t=a.state.uuid,n=a.state.latencyObj;if(n!=={}){e=Object.values(n),T=e.length;var c=Math.max.apply(Math,Object(s.a)(e));console.log(e),S=n[t]>0?c-n[t]:0}},a.playVid=function(){a.getClientLatency();var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime},console.log("Dynamic Latency Adjustment: ",S),a.setState({playState:"Play",playTime:e.currentTime},function(){k.emit("subscribeToTimer","Play",a.state.playTime)})},a.pauseVid=function(){var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime},a.setState({playState:"Pause",playTime:e.currentTime},function(){k.emit("subscribeToTimer","Pause",a.state.playTime)})},a.playAsync=function(){var e=document.getElementById("myVideo");a.setState({playState:"Play"}),e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime,e.play()}},a.pauseAsync=function(){var e=document.getElementById("myVideo");e.ontimeupdate=function(){document.getElementById("demo").innerHTML=e.currentTime,e.pause()},a.setState({playState:"Pause",curPlayTime:e.currentTime})},a.updatePlayhead=function(){var e=Object(d.a)(a),t=document.getElementById("myVideo");"Pause"===a.state.playState&&a.state.syncMode&&a.state.curPlayTime!==t.currentTime&&(console.log("update",t.currentTime),e.setState({playTime:t.currentTime},function(){console.log("madeit",e.state.playTime),k.emit("subscribeToTimer","Pause",e.state.playTime)}))},a.state={playTime:10,syncMode:!0,playState:"Pause",latencyObj:{},curPlayTime:0,latencyDelay:0,enterViewing:!1,curPass:"",pass:"BOD4945",checked:!1,videosrc:"https://firebasestorage.googleapis.com/v0/b/elevaetbackend.appspot.com/o/Test%2FTeams_Calling_BOD_V7.mp4?alt=media&token=6128a443-ca9b-49e6-a2b1-3bdbbc0b75db"},n=function(e){return a.setState({timer:e})},g.on("setTimer",function(e){return n(e)}),function(e){g.on("setVid",function(t){return e(t)})}(function(e){return a.setState({videosrc:e.videosrc})}),a.handleLatencyChange=a.handleLatencyChange.bind(Object(d.a)(a)),a.toggleSyncMode=a.toggleSyncMode.bind(Object(d.a)(a)),function(e){g.on("playController",function(t){return e(t)})}(function(e){return a.setState({playState:e.curPlayState,curPlayTime:e.curPlayTime,latencyObj:e.latencyObj})}),a}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.setState({uuid:f()}),this.initSocket()}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("myVideo");"Play"===this.state.playState?(k.emit("timer",(new Date).getTime(),this.state.uuid),this.state.checked?setTimeout(function(){e.play()},S):e.play()):(k.emit("timer",(new Date).getTime(),this.state.uuid),e.pause()),e.currentTime=this.state.curPlayTime}},{key:"handleLatencyChange",value:function(e){this.setState({checked:e})}},{key:"toggleSyncMode",value:function(){console.log("toggleSyncMode"),this.setState({syncMode:!this.state.syncMode})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"videoSycnWrapper"},!1===this.state.enterViewing?c.a.createElement("div",{className:"bg"},c.a.createElement("input",{className:"enterPass",type:"password",placeholder:"Enter Password",onChange:this.updatePass})):c.a.createElement("span",null," "),c.a.createElement("h1",null,"Synchronized Video Viewing"),c.a.createElement("div",null,"Active Viewers: ",T),c.a.createElement("div",{className:"videoWrapper"},c.a.createElement("video",{id:"myVideo",height:"300px",onTimeUpdate:this.updatePlayhead,src:this.state.videosrc,seeking:"true",controls:!0,preload:"auto"})),!0===this.state.syncMode?c.a.createElement("div",null,"Pause"===this.state.playState?c.a.createElement("button",{className:"player-controls-btns",onClick:this.playVid},"Play"):c.a.createElement("button",{className:"player-controls-btns",id:"SyncPause",onClick:this.pauseVid},"Pause")):c.a.createElement("span",null),!1===this.state.syncMode?c.a.createElement("div",null,"Pause"===this.state.playState?c.a.createElement("button",{className:"player-controls-btns",onClick:this.playAsync},"Play"):c.a.createElement("button",{className:"player-controls-btns",onClick:this.pauseAsync},"Pause")):c.a.createElement("span",null),c.a.createElement("div",{className:"videoContainer"},c.a.createElement("button",{onClick:function(){e.updateVidSRC("https://firebasestorage.googleapis.com/v0/b/elevaetbackend.appspot.com/o/Test%2FTeams_Calling_BOD_V9.mp4?alt=media&token=5de0e2cd-d28b-41d4-8f6e-d86ed7de9a6a")}},"Calling"),c.a.createElement("button",{onClick:function(){e.updateVidSRC("https://firebasestorage.googleapis.com/v0/b/elevaetbackend.appspot.com/o/Test%2FTeams_Meetings_BOD_V9.mp4?alt=media&token=352933ca-b1b9-49af-ae5c-a4bf08a9df56")}},"Meetings"),c.a.createElement("button",{onClick:function(){e.updateVidSRC("https://firebasestorage.googleapis.com/v0/b/elevaetbackend.appspot.com/o/Test%2FTFL_Captions_030520_v3.mp4?alt=media&token=c4868914-f104-4a2f-ba9a-d3ea6312a9db")}},"TFL"),c.a.createElement("button",{onClick:function(){e.updateVidSRC("https://firebasestorage.googleapis.com/v0/b/elevaetbackend.appspot.com/o/Test%2FBOD_Devices_V12HQ.mp4?alt=media&token=569c1090-e4e9-4ec2-af43-101317fd4b7d")}},"Devices")),c.a.createElement("span",null,"Synchronize Playback:"),c.a.createElement(v.a,{onChange:this.toggleSyncMode,checked:this.state.syncMode,onColor:"#6264a7",checkedIcon:!0}),c.a.createElement("p",null,"Client Video Timecode: ",c.a.createElement("span",{id:"demo"})),c.a.createElement("div",{className:"block"},"Server Timecode: ",this.state.curPlayTime),c.a.createElement("div",{className:"block"},"Server Playstate: ",this.state.playState),c.a.createElement("div",{className:"block"},"Client UUID: ",this.state.uuid),c.a.createElement("div",{className:"block"},"Dynamic Latency Control (WIP) ",c.a.createElement(v.a,{onChange:this.handleLatencyChange,checked:this.state.checked})),c.a.createElement("div",{className:"block"},"Latency Sync Adjustment: ",S))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.47fb95c2.chunk.js.map